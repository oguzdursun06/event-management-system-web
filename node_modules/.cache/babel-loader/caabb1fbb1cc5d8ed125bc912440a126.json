{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OGUZHAN\\\\Projects\\\\event-management-system\\\\frontend\\\\event-management\\\\src\\\\components\\\\Admin.js\";\nimport React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport Dialog from './Dialog';\nimport ApexChart from './ApexChart';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Link } from 'react-router-dom';\nimport moment from 'moment';\n\nclass Admin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Events: [],\n      Users: [],\n      Questions: []\n    };\n    this.editEvent = this.editEvent.bind(this);\n  }\n\n  async remove(id) {\n    let response = await fetch(`/api/events/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n\n    try {\n      response = await fetch('/api/events');\n      const body = await response.json();\n\n      if (body.httpStatus === \"BAD_REQUEST\") {\n        console.log(body.message);\n      } else {\n        let updatedEvents = this.state.events.filter(i => i.id !== id);\n        this.setState({\n          events: updatedEvents\n        });\n      }\n    } catch (e) {}\n\n    this.componentDidMount();\n  }\n\n  editEvent(id) {\n    window.localStorage.setItem(\"eventId\", id);\n    this.props.history.push('/editEvent');\n  }\n\n  async componentDidMount() {\n    const responseEvent = await fetch('/api/events');\n    const responseUser = await fetch('/api/users');\n\n    try {\n      const bodyEvent = await responseEvent.json();\n      const bodyUser = await responseUser.json();\n      this.setState({\n        Events: bodyEvent,\n        Users: bodyUser\n      });\n      const responseQuestion = await fetch('/api/questions');\n      const bodyQuestion = await responseQuestion.json();\n      this.setState({\n        Questions: bodyQuestion\n      });\n    } catch (err) {}\n  }\n\n  render() {\n    const {\n      Events,\n      Users,\n      Questions\n    } = this.state;\n    var tempDate = new Date();\n    var eventList = [];\n    var personCount = [];\n    var peopleList = [0, 0, 0, 0, 0, 0, 0];\n    Events.map((event, i) => eventList[i] = event.name);\n    Events.map((event, i) => personCount[i] = event.person_count);\n    Users.map(event => event.applyDay === \"Monday\" ? peopleList[0] = peopleList[0] + 1 : event.applyDay === \"Tuesday\" ? peopleList[1] = peopleList[1] + 1 : event.applyDay === \"Wednesday\" ? peopleList[2] = peopleList[2] + 1 : event.applyDay === \"Thursday\" ? peopleList[3] = peopleList[3] + 1 : event.applyDay === \"Friday\" ? peopleList[4] = peopleList[4] + 1 : event.applyDay === \"Saturday\" ? peopleList[5] = peopleList[5] + 1 : peopleList[6] = peopleList[6] + 1);\n    var currentDate = moment().format(\"YYYY-MM-DD\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bgUser\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 22\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 32\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      to: \"/event\",\n      className: \"btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, \"YEN\\u0130 ETK\\u0130NL\\u0130K OLU\\u015ETUR\"), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    }, Events.map((event, i) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      id: event.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }, event.category === \"yazilim\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-software\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 61\n      }\n    }) : null, event.category === \"sanat\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-art\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 59\n      }\n    }) : null, event.category === \"egitim\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-education\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 60\n      }\n    }) : null, event.category === \"spor\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-sports\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 58\n      }\n    }) : null, event.category === \"gezi\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-travel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 58\n      }\n    }) : null, event.category === \"eglence\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-fun\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 61\n      }\n    }) : null, event.category === \"diger\" ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-image-other\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 59\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, event.start_event_date.split(\"T\")[0].split(\"-\")[2] + \"/\" + event.start_event_date.split(\"T\")[0].split(\"-\")[1] + \"/\" + event.start_event_date.split(\"T\")[0].split(\"-\")[0] + \" - \" + event.finish_event_date.split(\"T\")[0].split(\"-\")[2] + \"/\" + event.finish_event_date.split(\"T\")[0].split(\"-\")[1] + \"/\" + event.finish_event_date.split(\"T\")[0].split(\"-\")[0]), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, event.name), currentDate > event.start_event_date.split(\"T\")[0] ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 87\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 93\n      }\n    }, \"Bu etkinlik ba\\u015Flang\\u0131\\xE7 tarihi ge\\xE7ti\\u011Fi i\\xE7in silinemez veya g\\xFCncellenemez.\"), /*#__PURE__*/React.createElement(Dialog, {\n      liste: this.state.Users,\n      search: event.id,\n      type: \"users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 34\n      }\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      liste: this.state.Questions,\n      search: event.id,\n      type: \"questions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 34\n      }\n    }), \" \") : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"buttons\",\n      onClick: () => this.editEvent(event.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      fontSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 103\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"buttons\",\n      onClick: e => {\n        if (window.confirm('Silinen etkinliğin geri alınamayacağınızı unutmayınız!\\nBu etkinliği silmek istediğinizden emin misiniz?')) this.remove(event.id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 34\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      fontSize: \"large\",\n      color: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 231\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 34\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 39\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 44\n      }\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      liste: this.state.Users,\n      search: event.id,\n      type: \"users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 34\n      }\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      liste: this.state.Questions,\n      search: event.id,\n      type: \"questions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 34\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ApexChart, {\n      events: eventList,\n      people: personCount,\n      title: \"Etkinliklere ba\\u015Fvuran say\\u0131s\\u0131na g\\xF6re bar-chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ApexChart, {\n      people: peopleList,\n      title: \"Etkinliklere ba\\u015Fvurulan g\\xFCne g\\xF6re bar-chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Admin;","map":{"version":3,"sources":["C:/Users/OGUZHAN/Projects/event-management-system/frontend/event-management/src/components/Admin.js"],"names":["React","Component","Moment","Dialog","ApexChart","DeleteIcon","EditIcon","Link","moment","Admin","constructor","props","state","Events","Users","Questions","editEvent","bind","remove","id","response","fetch","method","headers","body","json","httpStatus","console","log","message","updatedEvents","events","filter","i","setState","e","componentDidMount","window","localStorage","setItem","history","push","responseEvent","responseUser","bodyEvent","bodyUser","responseQuestion","bodyQuestion","err","render","tempDate","Date","eventList","personCount","peopleList","map","event","name","person_count","applyDay","currentDate","format","category","start_event_date","split","finish_event_date","confirm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Moment from 'react-moment';\r\nimport Dialog from './Dialog';\r\nimport ApexChart from './ApexChart';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport {Link} from 'react-router-dom';\r\nimport moment from 'moment'; \r\nclass Admin extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            Events: [],\r\n            Users: [],\r\n            Questions: [],\r\n        }\r\n\r\n        this.editEvent = this.editEvent.bind(this);\r\n    }\r\n\r\n\r\n    async remove(id) {\r\n      \r\n        let response = await fetch(`/api/events/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        try {\r\n            response = await fetch('/api/events');\r\n            const body = await response.json();\r\n        if(body.httpStatus === \"BAD_REQUEST\") {\r\n            console.log(body.message);\r\n        } else {\r\n            let updatedEvents = this.state.events.filter(i => i.id !== id);\r\n            this.setState({ events: updatedEvents });\r\n        }\r\n        } catch(e) {\r\n        } \r\n        this.componentDidMount();\r\n    }\r\n\r\n    editEvent(id) {\r\n        window.localStorage.setItem(\"eventId\", id);\r\n        this.props.history.push('/editEvent');\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        const responseEvent = await fetch('/api/events');\r\n        const responseUser = await fetch('/api/users');\r\n        try {\r\n        const bodyEvent = await responseEvent.json();\r\n        const bodyUser = await responseUser.json();\r\n        this.setState({Events: bodyEvent, Users: bodyUser});\r\n        const responseQuestion = await fetch('/api/questions');\r\n        const bodyQuestion = await responseQuestion.json();\r\n        this.setState({Questions: bodyQuestion});\r\n        }\r\n        catch(err){\r\n            \r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {Events,Users,Questions} = this.state;\r\n        var tempDate = new Date();\r\n        var eventList = [];\r\n        var personCount = [];\r\n        var peopleList = [0,0,0,0,0,0,0];\r\n       Events.map((event,i) =>\r\n        eventList[i] = event.name\r\n      );\r\n      Events.map((event,i) =>\r\n        personCount[i] = event.person_count\r\n      );\r\n      Users.map(event =>\r\n        event.applyDay === \"Monday\" ? peopleList[0] = peopleList[0] + 1 : event.applyDay === \"Tuesday\" ? peopleList[1] = peopleList[1] + 1 : event.applyDay === \"Wednesday\" ? peopleList[2] = peopleList[2] + 1 : event.applyDay === \"Thursday\" ? peopleList[3] = peopleList[3] + 1 : event.applyDay === \"Friday\" ? peopleList[4] = peopleList[4] + 1 : event.applyDay === \"Saturday\" ? peopleList[5] = peopleList[5] + 1 : peopleList[6] = peopleList[6] + 1 \r\n    );\r\n        var currentDate = moment().format(\"YYYY-MM-DD\");\r\n \r\n        return (\r\n            <div className = \"bgUser\">\r\n                <br/><br/><br/><br/><br/>\r\n                <Link to='/event' className='btn-primary'>YENİ ETKİNLİK OLUŞTUR</Link>\r\n                <tr>\r\n                {\r\n                    \r\n                    Events.map((event,i) =>      \r\n                        <div className=\"card\" id={event.id}>\r\n                            {event.category === \"yazilim\" ? <div className=\"card-image-software\"></div> : null}\r\n                            {event.category === \"sanat\" ? <div className=\"card-image-art\"></div> : null}\r\n                            {event.category === \"egitim\" ? <div className=\"card-image-education\"></div> : null}\r\n                            {event.category === \"spor\" ? <div className=\"card-image-sports\"></div> : null}\r\n                            {event.category === \"gezi\" ? <div className=\"card-image-travel\"></div> : null}\r\n                            {event.category === \"eglence\" ? <div className=\"card-image-fun\"></div> : null}\r\n                            {event.category === \"diger\" ? <div className=\"card-image-other\"></div> : null}\r\n\r\n\r\n                            <div className=\"card-text\">\r\n                            <span className=\"date\">{event.start_event_date.split(\"T\")[0].split(\"-\")[2]+\"/\"+event.start_event_date.split(\"T\")[0].split(\"-\")[1]+\"/\"+event.start_event_date.split(\"T\")[0].split(\"-\")[0]+\" - \"+event.finish_event_date.split(\"T\")[0].split(\"-\")[2]+\"/\"+event.finish_event_date.split(\"T\")[0].split(\"-\")[1]+\"/\"+event.finish_event_date.split(\"T\")[0].split(\"-\")[0]}</span>\r\n                                <h2>{event.name}</h2>\r\n                                {currentDate > event.start_event_date.split(\"T\")[0] ? <div> <h5>Bu etkinlik başlangıç tarihi geçtiği için silinemez veya güncellenemez.</h5> \r\n                                 <Dialog liste={this.state.Users} search={event.id} type=\"users\"/>\r\n                                 <Dialog liste={this.state.Questions} search={event.id} type=\"questions\"/> </div> :\r\n                                 \r\n                                <div>\r\n                                <button className=\"buttons\" onClick={() => this.editEvent(event.id)} ><EditIcon fontSize=\"large\"/></button>\r\n                                 <button className=\"buttons\" onClick={(e) => {if (window.confirm('Silinen etkinliğin geri alınamayacağınızı unutmayınız!\\nBu etkinliği silmek istediğinizden emin misiniz?')) this.remove(event.id)}}><DeleteIcon fontSize=\"large\" color=\"red\"/></button>\r\n                                 <br/><br/><br/>\r\n                                 <Dialog liste={this.state.Users} search={event.id} type=\"users\"/>\r\n                                 <Dialog liste={this.state.Questions} search={event.id} type=\"questions\"/>\r\n                                 </div>\r\n                                }\r\n                            </div>\r\n\r\n\r\n                            \r\n                            \r\n                     \r\n                            </div>\r\n\r\n                            \r\n                    )\r\n                   \r\n                    \r\n                }   \r\n                <div className=\"card-5\">\r\n                <ApexChart events = {eventList} people={personCount} title='Etkinliklere başvuran sayısına göre bar-chart'/>\r\n                <br/>\r\n                </div>\r\n                <div className=\"card-5\">\r\n                <ApexChart people={peopleList} title='Etkinliklere başvurulan güne göre bar-chart'/>\r\n                </div>\r\n                </tr>\r\n                <tr>\r\n             </tr>\r\n             \r\n            </div>\r\n            \r\n        );\r\n       \r\n    }\r\n}\r\n\r\nexport default Admin;"]},"metadata":{},"sourceType":"module"}